@import 'modules/_breakpoints';
@import 'modules/_typography';
@import 'modules/_palette';
@import 'modules/_grid-system';
@import 'modules/_mq';
@import 'modules/_side-margins';
@import 'margins';

$nhsGreen: #5BC4BF;
$nhsDarkGreen: #45B7B1;

$guardianBlue: #00427A;
$guardianGrey: #F6F6F6;

$nhsLightBlue: #228ABC;
$nhsDarkerBlue: #177CAC;
$nhsDarkBlue: #146388;

$nhsWhite: #fff;
$nhsLightGrey: #DAE3E7;
$nhsGrey: #8CA6B4;
$nhsDarkGrey: #43525A;

body {
    margin: 0;
    padding: 0;
    color:#333;
    background-color:#fff;
}

figure.interactive{
    margin:0;
}
// Remove <figure> margin
.interactive {
    margin: 0;

    iframe{
        border:none;
        max-width:480px;
    }
    .gv-wrapper{
    	position: relative;
    }
    *, * *{
    	box-sizing:border-box;
    }
    h1,h2,h3,h4,h5{
    	font-family:$f-serif-headline;
    }
    .section-header{
        font-size:20px;
        font-family:$f-serif-headline;
        font-weight:bold;
        margin:0 0 0.25em;
        line-height: 1em;
    }
    .shareButtons{
        margin-top:12px;
        button{
            background-color:rgba(67,82,90,0.2);
            transition: background-color 200ms;
            border:none;
            width:30px;
            outline:none;
            border-radius:30px;
            height:30px;
            background-position:center;
            cursor:pointer;
            &.twitter{
                background-image: url(/imgs/twitter.svg);
            }
            &.facebook{
                background-image: url(/imgs/facebook.svg);
            }
            &.mail{
                background-image: url(/imgs/mail.svg);
            }
            &:hover{
                background-color:rgba(67,82,90,0.4);
            }
        }
    }
    .header-wrapper{
        max-width:740px;
        padding:0 10px;
        margin:0 auto;
        position:relative;
    }
    header#title-header{
    	background-color: $nhsGreen;
    	padding:1px 0 54px;

    	h1{
    		margin:1em 0 0;
    		line-height:1em;
    		font-size:18px;
            font-weight:bold;
            a{
                text-decoration: none;
                color:$guardianBlue;
                &:hover{
                    text-decoration: underline;
                }
            }
    	}

    	h2{
    		color:$nhsWhite;
    		font-weight:100;
    		line-height:1em;
    		font-size:42px;
    		margin:0;
    	}
        #intro-text{
            font-family:$f-serif-headline;
            font-size:18px;
            line-height:24px;
            color:#fff;
            font-weight:400;
            margin-top:24px;
            margin-bottom:0;
            max-width:620px;
            a{
                color:#fff;
            }
            &:before{
                height:1px;
                width:60px;
                display:block;
                content:'';
                margin-bottom:4px;
            }
        }
    }

    header#details-header{
        position:relative;
        background:#7CD0CC;
        padding-bottom:36px;
        padding-top:12px;
        h5{
            font-size:20px;
            line-height: 1em;
            color:#fff;
            margin-bottom:0.25em;
            margin-top:0;
        }
        p{
            font-family:$f-serif-headline;
            line-height:30px;
            font-size:24px;
            color:#fff;
            font-weight:100;
            margin:0;
            max-width:620px;
        }
        #total-number{
            font-family:$f-serif-headline;
            color:#fff;
            font-weight:500;
            display:block;
            font-size:48px;
            margin-top:24px;
            line-height:1em;
            #price-disclaimer{
                font-size: 18px;
                display: block;
                font-weight: 100;
                line-height: 1em;
            }
            &:before{
                height:1px;
                width:70px;
                background:#fff;
                display:block;
                content:'';
                margin-bottom:6px;
            }
        }
        #gender-select{
            display: inline-block;
            button{
                outline:none;
                border:none;
                height:28px;
                padding: 0 18px;
                background-color:rgba(0,0,0,0.1);
                color:rgba(255,255,255,0.8);
                font-family:$f-sans-serif-text;
                font-size:14px;
                border-radius:20px;
                line-height:1em;
                vertical-align: top;
                cursor: pointer;
                &:hover{
                    background-color:rgba(0,0,0,0.3);
                }
                &#selected{
                    background-color:#fff;
                    color:#448B87;
                }
            }
        }
        .selectContainer{
            display:inline-block;
            width:auto;
            height:auto;
            border-radius:20px;
            background-color:#fff;
            margin-bottom:1px;
            position:relative;
            line-height: 0;
            vertical-align: bottom;
            overflow:hidden;
            &:after{
                display:block;
                content:'';
                width:7px;
                height:13px;
                position:absolute;
                right:10px;
                top:7px;
                background-image: url(/imgs/select_arrow.png);
                background-size:100%;
                background-repeat:no-repeat;
            }
        }
        select{
            font-size:16px;
            border-color:#fff;
            color:#448B87;
            height:28px;
            border:none;
            background:#fff;
            font-family:$f-sans-serif-text; 
            appearance: none;
            border-radius:20px;
            padding:0 18px 0 10px;
            width:115%;
            line-height:1em;
        }
    }

    #interactive-content{
    	padding:0 10px;
    	position: relative;
    }

    #questions-container{
    	#title-question{
    		margin-bottom:24px;
            padding-top:12px;
    		h2{
    			font-size:20px;
                font-weight:100;
    			line-height:1.25em;
    			margin:0;
    		}
            h5{
                font-weight:bold;
            }
    		p{
    			margin:4px 0 0 ;
    			font-family: $f-sans-serif-text;
    			color:#aaa;
    			font-size:14px;
                line-height: 1.25em;
    		}
    	}
    	.question-container{
    		min-height:0;
    		transition: min-height 0.6s;
    		position: relative;
            overflow: hidden;
            margin-bottom:6px;

    		&.order-0{
    			background-color:$guardianGrey;
                border-top:1px solid #dfdfdf;
    			.treatment-list li{
                    border-top:1px solid rgba(0,0,0,0.1);
                }
    		}
    		&.order-1{
    			background-color:$nhsLightGrey;
                border-top:1px solid #C1CFD6;
                .treatment-list li{
        			border-top:1px solid rgba(52,78,86,0.1);
                }
    		}
    		.question-intro{
    			color:$nhsDarkGrey;
    			padding:6px 6px 24px;
    			position: relative;
    			cursor: pointer;
    			&:hover{
    				h3{
    					text-decoration: underline;
    				}
    			}
    		}
    		h3{
    			font-size:16px;
    			line-height:1.1em;
    			margin:0;
                font-weight:400;
    		}
    		h4{
    			margin:0;
    			font-family:$f-sans-serif-text;
    			font-size:12px;
    			font-weight:bold;
                opacity:0.4;
    		}
    		.hidden-container{
    			opacity:0;
    			position: absolute;
    			z-index:-2;
    			padding:1px 6px 12px;
                width:100%;
    			ul{
    				margin:0;
    			}
    		}
    	}
    	.state-expanded{
    		.hidden-container{
    			animation: appear 1s;
    			z-index:1;
    			opacity:1;
    		}
    		.question-intro{
    			&:hover{
    				h3{
    					text-decoration: none;
    				}
    			}
    		}
    	}

    	.state-collapsed{
    		.hidden-container{
    			animation: disappear 1s;
    			opacity:0;
    			position:absolute;
    		}
    	}
    	.treatment-list{
    		padding:0;
    		list-style:none;
    		li{
    			color:$nhsDarkGrey;
    			font-size:14px;
    			font-family: $f-sans-serif-text;
    			font-weight:bold;
    			line-height:1em;
    			padding: 12px 0;
                transition: 200ms color;
    			cursor:pointer;
    			position: relative;
    			
    			&:after{
    				clear:both;
    				content:'';
    				display:block;
    			}
    			&:hover{
    				.treatment-name .name-container{
    					text-decoration: underline;
    				}
    				
    			}
    			&.added{
    				.treatment-radio-button:before{
    					transform: scale(1);
    				}
                    color:$nhsDarkBlue;
                    .treatment-name .name-container,.treatment-price{
                        text-decoration: underline;
                    }

                    .treatment-name input{
                        display:inline-block;
                    }
                    &:hover{
                        .treatment-name .name-container,.treatment-price{
                            color:darken($nhsDarkBlue,10%);
                        }
                    }
    			}
    			.treatment-price{
    				position: absolute;
    				right:2px;
    				top:18px;
    				font-weight:100;
    				width:60px;
    				text-align: right;
    			}
    			.treatment-name{
    				padding-right:60px;
    				display:inline-block;
                    font-weight:900;
                    min-height:24px;
                    .name-container{
                        padding-top:6px;
                        display:inline-block;
                        margin-right:10px;
                        span{
                            font-weight:100;
                        }
                    }
                    
                    input{
                        width: 40px;
                        height: 24px;
                        border-radius: 3px;
                        border: none;
                        padding: 0 5px;
                        font-family:$f-sans-serif-text;
                        display:none;
                        border:1px solid rgba(0, 60, 96, 0.3);
                    }
    			}
    		}
    	}
    }
    #receipt-holder{
        position:absolute;
        right:10px;
        width:220px;
    }
    #receipt-container{
    	position: fixed;
        z-index:10;
    	background:#fff;
        border: 1px solid #fff;
    	bottom:10px;
    	padding:0 6px;
    	box-shadow: 0 2px 2px rgba(0,0,0,0.2);
        opacity:0;
        transition:200ms opacity;
    	p{
    		font-family: $f-sans-serif-text;
    		font-size:12px;
    		margin:0;
    		width:100px;
    		float:left;
    		line-height:1.2em;
    	}
    	h5{
    		font-size:24px;
    		color:$nhsLightBlue;
    		margin:0;
    		float:right;
    		width:98px;
    		text-align:right;
    		line-height:1em;
    		font-weight:500;
    	}
    	#total-number{
    		overflow:hidden;
    		padding:12px 0 12px;
    	}

    	#total-breakdown{
    		display:none;
    	}

    	.breakdown-list{
    		padding:0;
    		margin:0;
    		
    		li{
    			list-style:none;
    			font-size:12px;
    			font-family: $f-sans-serif-text;
    			color:#333;
    			margin:0 0 12px;
    			line-height:1em;

    			&:first-child{
    				padding-top:12px;
    				border-top: 1px dashed $nhsLightGrey;
    			}
    			&:last-child{
    				padding-bottom:12px;
    			}

    			&:after{
    				clear:both;
    				display:block;
    				content: '';
    			}

    			.breakdown-name{
    				float:left;
    				width:148px;
    			}

    			.breakdown-price{
    				font-weight:bold;
    				float:right;
    				width:50px;
    				text-align: right;
    			}
    		}
    	}
        &.sticky{
            opacity:1;
        }
    }

    footer#summary-container{
        margin-top:30px;
        padding-bottom:48px;
        h5{
            font-family: $f-serif-headline;
            font-size:21px;
            line-height: 27px;
            margin:0 0 30px;
            font-weight:500;
            color: $nhsDarkGrey;
            &:before{
                height:1px;
                width:70px;
                display:block;
                content:'';
                background-color: $nhsDarkGrey;
                margin-bottom:6px;
            }
            span{
                font-weight:100;
            }
        }
        #share-question{
            p{
                font-family: $f-serif-headline;
                font-weight:bold;
                margin:0;
                color: $nhsDarkGrey;
            }
            button{
                height:36px;
                padding:0 18px;
                color:#fff;
                background-color: $nhsDarkGrey;
                font-weight:bold;
                font-family: $f-serif-headline;
                display:inline-block;
                border:none;
                font-size:16px;
                border-radius:40px;
                outline:none;
                cursor:pointer;
                &:hover{
                    background-color: darken($nhsDarkGrey,10%);
                }
            }
            .shareButtons{
                display: inline-block;
                vertical-align: middle;
                margin:0;
                font-size:0;
                button{
                    margin-right:4px;
                }
            }
            #question-step-2,#question-step-3{
                display:none;
                min-height:36px;
            }
            &.answer-yes{
                #question-step-1{
                    display:none;
                }
                #question-step-2{
                    display:block;
                }
            }
            &.answer-no{
                #question-step-1{
                    display:none;
                }
                #question-step-3{
                    display:block;
                }
            }
        }
        #disclaimer{
            font-family: $f-sans-serif-text;
            font-size:12px;
            margin-top:36px;
            color:$nhsGrey;
            strong{
                display:block;
                &:last-child{
                    margin-top:12px;
                }
            }
        }
        
    }
    @media(min-width:breakpoints(mobileLandscape)){
        .header-wrapper{
            padding:0 20px;
        }

        #interactive-content{
	    	padding:0 20px;
	    }

	    #questions-container{
	    	.question-container{
	    		h3{
	    			font-size:20px;
	    		}
	    		h4{
	    			font-size:14px;
	    		}
                &.order-0{
                    // margin-right:20px;
                }
                &.order-1{
                    // margin-left:20px;
                }
	    	}
	    	.treatment-list{
	    		li{
	    			font-size:14px;
                    padding:14px 0;
                    .treatment-price{
                        top:20px;
                    }
	    		}
	    	}
	    }
        #receipt-holder{
            right:20px;
        }   
        footer#summary-container{
            margin-top:48px;
            #share-question p{
                display: inline-block;
                margin-right:6px;
            }
        }
    }

    @media ( min-width: breakpoints(phablet) ) {
        header#title-header{
            h1{
                font-size:20px;
            }
        	h2{
        		font-size:60px;
        	}
        }
        header#details-header{
            padding-top:18px;
            h5{
                font-size:24px;
            }
            p{
                font-size:36px;
                line-height:42px;
            }
            #gender-select{
                button{
                    height:36px;
                    font-size:16px;
                    margin-top:2px;
                }
            }
            .selectContainer{
                &:after{
                    top:11px;
                }
            }
            select{
                height:36px;
                font-size:16px;
            }
            #total-number{
                font-size:54px;
            }
        }
        #questions-container{
            #title-question{
                padding-top:18px;
                h5,h2{
                    font-size:24px;
                }
            }
            .question-container{
                .treatment-list{
                    column-count:2;
                    column-gap: 20px;
                    li{
                        -webkit-column-break-inside: avoid;
                    }
                }
            }
        }
        .shareButtons{
            button{
                width:36px;
                height:36px;
            }
        }
	    .treatment-list{
    		li{
    			font-size:14px;
    			padding: 14px 0;
    		}
    	}
        footer#summary-container{
            h5{
                font-size:24px;
                line-height: 30px;
            }
        }
    }

    @media ( min-width: breakpoints(tablet) ) { //740px

    }

    @media ( min-width: breakpoints(desktop) ) {
        .header-wrapper{
            max-width:980px;
        }
    	header#title-header{
    		h1,h2,#intro-text,.shareButtons{
    			margin-left:80px;
                max-width:620px;
    		}
            h1{
                font-size:24px;
            }
            
            #intro-text{
                margin-top:24px;
                font-size:20px;
                line-height: 27px;
            }
    	}

        header#details-header{
            h5,p{
                margin-left:80px;
            }
            #total-number{
                margin-left:80px;
                #price-disclaimer{
                    display: inline-block;
                    margin-left:5px;
                }
            }
        }

    	#questions-container{
	    	max-width:620px;
            margin-left:80px;
	    	#title-question{
	    		margin-bottom:48px;
	    		h2{
                    font-size:24px;
	    		}
                h5{
                    font-size:24px;
                }
	    		p{
	    			font-size:16px;
	    		}
	    	}
	    }
        #receipt-holder{
            top:240px;
            width:220px;
        }
        #receipt-container{
            width:220px;
            bottom:auto;
            position:absolute;
            border-color:$nhsLightGrey;
            right:auto;
            box-shadow:none;
            opacity: 1;
            padding: 0 10px;
            #total-number{
                padding: 18px 0 18px;
            }
            #total-breakdown{
                display:block;  
            }
            &.sticky{
                position:fixed;
                top:10px;
            }
            
        }

    }

    @media ( min-width: breakpoints(leftCol) ) { //1140px
        .header-wrapper{
            max-width:1140px;
        }
    	header#title-header{
            padding-top:18px;
    		h2{
                margin-left:160px;
                max-width:700px;
    		}
            h1{
                position:absolute;
                left:20px;
                margin:4px 0 0;
                width:140px;
                font-size:20px;
            }
            .shareButtons{
                margin-left:160px;
            }

            #intro-text{
                margin-left:160px;
                max-width: 700px;
            }
    	}
        header#details-header{
            h5,p{
                margin-left:160px;
                max-width: 700px;
            }
            #total-number{
                margin-left:160px;
            }
        }
    	#questions-container{
            max-width:700px;;
            margin-left:160px;
            #title-question{
                h2{
                    font-size:24px;
                }
            }

	    	.question-container{
	    		h3{
	    			font-size:24px;
	    		}
	    		.question-intro{
	    			padding:12px 12px 42px 12px;
	    		}
	    		
	    		.hidden-container{
	    			padding-left:12px;
	    			padding-right:12px;
	    		}
	    	}
	    	.treatment-list{
	    		li{
	    			padding:16px 0;
	    			// font-size:16px;
	    			.treatment-price{
	    				top:22px;
	    			}
	    		}
	    	}
	    }
        #receipt-holder{
            top:210px;
        }
        footer#summary-container{
            margin-top:60px;
            h5{
                font-size:30px;
                line-height: 36px;
            }
        }
    }

    @media ( min-width: breakpoints(wide) ) {
        .header-wrapper{
            max-width:1300px;
        }
    	header#title-header{
    		h2,#intro-text{
    			margin-left:240px;
    		}
            .shareButtons{
                margin-left:240px;
            }
    	}

        header#details-header{
            h5,p{
                margin-left:240px;
            }
            #total-number{
                margin-left:240px;
            }
        }

    	#questions-container{
            margin-left:240px;
	    }
	    #receipt-holder{
            width:300px;
        }
        #receipt-container{
            width:300px;
            opacity:1;
        }
        #receipt-container{ 
            .breakdown-list li .breakdown-name{
                width:228px;
            }
            #total-number{
                p{
                    font-size:14px;
                    width:120px;
                }
                h5{
                    font-size:28px;
                    width:140px;
                }
            }
        }
    }
}


@keyframes appear{
	0%{
		opacity:0;
		position:absolute;
	}
	60%{
		opacity:0;
		position:absolute;
	}
	65%{
		opacity:0;
		position:relative;
	}
	85%{
		opacity:1;
	}
}

@keyframes disappear{
	0%{
		opacity:1;
		position:relative;
	}
	20%{
		opacity:0;
		position:absolute;
	}
}
