@import 'modules/_breakpoints';
@import 'modules/_typography';
@import 'modules/_palette';
@import 'modules/_grid-system';
@import 'modules/_mq';
@import 'modules/_side-margins';
@import 'margins';

$nhsGreen: #5BC4BF;
$nhsDarkGreen: #45B7B1;

$guardianBlue: #00427A;
$nhsLightBlue: #228ABC;
$nhsDarkerBlue: #177CAC;
$nhsDarkBlue: #146388;

$nhsWhite: #fff;
$nhsLightGrey: #DAE3E7;
$nhsGrey: #8CA6B4;
$nhsDarkGrey: #43525A;

body {
    margin: 0;
    padding: 0;
    color:#333;
    background-color:#fff;
}

figure.interactive{
    margin:0;
}
// Remove <figure> margin
.interactive {
    margin: 0;

    .gv-wrapper{
    	position: relative;
    }
    *, * *{
    	box-sizing:border-box;
    }
    h1,h2,h3,h4,h5{
    	font-family:$f-serif-headline;
    }
    .section-header{
        font-size:20px;
        font-family:$f-serif-headline;
        font-weight:bold;
        margin:0 0 0.25em;
        line-height: 1em;
    }
    .shareButtons{
        margin-top:12px;
        button{
            background-color:rgba(67,82,90,0.2);
            transition: background-color 200ms;
            border:none;
            width:30px;
            outline:none;
            border-radius:30px;
            height:30px;
            background-position:center;
            cursor:pointer;
            &.twitter{
                background-image: url(/imgs/twitter.svg);
            }
            &.facebook{
                background-image: url(/imgs/facebook.svg);
            }
            &.mail{
                background-image: url(/imgs/mail.svg);
            }
            &:hover{
                background-color:rgba(67,82,90,0.4);
            }
        }
    }
    .header-wrapper{
        max-width:740px;
        padding:0 10px;
        margin:0 auto;
        position:relative;
    }
    header#title-header{
    	background-color: $nhsGreen;
    	padding:1px 0 54px;

    	h1{
    		margin:1em 0 0;
    		line-height:1em;
    		font-size:18px;
            font-weight:bold;
            a{
                text-decoration: none;
                color:$guardianBlue;
                &:hover{
                    text-decoration: underline;
                }
            }
    	}

    	h2{
    		color:$nhsWhite;
    		font-weight:100;
    		line-height:1em;
    		font-size:42px;
    		margin:0;
    	}
        #intro-text{
            font-family:$f-serif-headline;
            font-size:18px;
            line-height:24px;
            color:#fff;
            font-weight:400;
            margin-top:24px;
            margin-bottom:0;
            max-width:620px;
            a{
                color:#fff;
            }
            &:before{
                height:1px;
                width:60px;
                background:#fff;
                display:block;
                content:'';
                margin-bottom:4px;
            }
        }
    }

    header#details-header{
        position:relative;
        background:#7CD0CC;
        padding-bottom:36px;
        padding-top:12px;
        p{
            font-family:$f-serif-headline;
            line-height:28px;
            font-size:24px;
            color:#fff;
            font-weight:100;
            margin:0;
            max-width:620px;
        }
        #total-number{
            font-family:$f-serif-headline;
            color:#fff;
            font-weight:500;
            display:block;
            font-size:48px;
            margin-top:24px;
            line-height:1em;
            &:before{
                height:1px;
                width:70px;
                background:#fff;
                display:block;
                content:'';
                margin-bottom:6px;
            }
        }
        #gender-select{
            display: inline-block;
            button{
                outline:none;
                border:none;
                height:28px;
                padding: 0 18px;
                background-color:rgba(0,0,0,0.2);
                color:rgba(255,255,255,0.6);
                font-family:$f-sans-serif-text;
                font-size:14px;
                border-radius:20px;
                line-height:1em;
                vertical-align: top;
                cursor: pointer;
                &#selected{
                    background-color:#fff;
                    color:#448B87;
                }
            }
        }
        select{
            font-size:14px;
            border-color:#fff;
            color:#448B87;
            height:20px;
            border:none;
            background:#fff;
            font-family:$f-sans-serif-text;
            vertical-align: bottom;
            margin-bottom:3px;
        }
    }

    #interactive-content{
    	padding:0 10px;
    	position: relative;
    }

    #questions-container{

    	#title-question{
    		margin-bottom:24px;
            padding-top:12px;
    		h2{
    			font-size:20px;
                font-weight:100;
    			line-height:1.25em;
    			margin:0;
    		}
            h5{
                font-weight:bold;
            }
    		p{
    			margin:4px 0 0 ;
    			font-family: $f-sans-serif-text;
    			color:#aaa;
    			font-size:14px;
                line-height: 1.25em;
    		}
    	}
    	.question-container{
    		min-height:0;
    		transition: min-height 0.6s;
    		position: relative;
            overflow: hidden;

    		&.order-0{
    			background-color:$nhsDarkGrey;
    			margin-right:10px;
    		}
    		&.order-1{
    			background-color:$nhsGrey;
    			margin-left:10px;
    		}
    		.question-intro{
    			color:$nhsWhite;
    			padding:24px 10px;
    			position: relative;
    			cursor: pointer;
    			&:hover{
    				h3{
    					text-decoration: underline;
    				}
    			}
    		}
    		h3{
    			font-size:16px;
    			line-height:1.1em;
    			margin:0;
    		}
    		h4{
    			margin:0;
    			font-family:$f-sans-serif-text;
    			font-size:12px;
    			font-weight:normal;
    		}
    		.hidden-container{
    			opacity:0;
    			position: absolute;
    			z-index:-2;
    			padding:1px 10px 12px;
                width:100%;
    			ul{
    				margin:0;
    			}
    		}
    	}
    	.state-expanded{
    		&.order-0{
    			background-color: darken($nhsDarkGrey,5%);
    		}
    		&.order-1{
    			background-color: darken($nhsGrey,5%);
    		}

    		.hidden-container{
    			animation: appear 1s;
    			z-index:1;
    			opacity:1;
    			// position:relative;
    		}
    		.question-radio-button{
    			border-color: $nhsDarkBlue;
    			&:before{
    				transform: scale(1);
    			}
    		}
    		.question-intro{
    			&:hover{
    				h3{
    					text-decoration: none;
    				}
    			}
    		}
    	}

    	.state-collapsed{
    		.hidden-container{
    			animation: disappear 1s;
    			opacity:0;
    			position:absolute;
    		}
    	}
    	.treatment-list{
    		padding:0;
    		list-style:none;
    		li{
    			color:$nhsWhite;
    			font-size:14px;
    			font-family: $f-serif-headline;
    			font-weight:bold;
    			line-height:1em;
    			padding: 12px 0;
    			border-top:1px solid rgba(255,255,255,0.1);
    			cursor:pointer;
    			position: relative;
    			
    			&:after{
    				clear:both;
    				content:'';
    				display:block;
    			}
    			&:hover{
    				.treatment-name{
    					text-decoration: underline;
    				}
    				
    			}
    			.treatment-radio-button{
    				width:12px;
    				height:12px;
    				border-radius:10px;
    				border:1px solid $nhsDarkBlue;
    				display:block;
    				background-color:#fff;
    				float:left;
    				left:0;
    				position: absolute;
                    top:50%;
                    margin-top:-6px;
    				&:before{
    					display:block;
    					width:6px;
    					height:6px;
    					border-radius:6px;
    					content:'';
    					margin-left:2px;
    					margin-top:2px;
    					background-color:$nhsDarkBlue;
    					transform: scale(0);
    					transition:transform 100ms;
                        backface-visibility: hidden;
    				}
    			}
    			&.added{
    				.treatment-radio-button:before{
    					transform: scale(1);
    				}
    			}
    			.treatment-price{
    				position: absolute;
    				right:0;
    				top:12px;
    				font-weight:100;
    				width:60px;
    				text-align: right;
    			}
    			.treatment-name{
    				padding-right:60px;
    				padding-left:22px;
    				display:inline-block;
                    font-weight:500;
                    span{
                        font-weight:100;
                    }
    			}
    		}
    	}
    }
    #receipt-holder{
        position:absolute;
        right:10px;
        width:220px;
    }
    #receipt-container{
    	position: fixed;
        z-index:10;
    	background:#fff;
        border: 1px solid #fff;
    	bottom:10px;
    	padding:0 10px;
    	box-shadow: 0 2px 2px rgba(0,0,0,0.2);
        opacity:0;
        transition:200ms opacity;
    	p{
    		font-family: $f-sans-serif-text;
    		font-size:12px;
    		margin:0;
    		width:100px;
    		float:left;
    		line-height:1.2em;
    	}
    	h5{
    		font-size:24px;
    		color:$nhsLightBlue;
    		margin:0;
    		float:right;
    		width:98px;
    		text-align:right;
    		line-height:1em;
    		font-weight:500;
    	}
    	#total-number{
    		overflow:hidden;
    		padding:12px 0;
    	}

    	#total-breakdown{
    		display:none;
    	}

    	.breakdown-list{
    		padding:0;
    		margin:0;
    		
    		li{
    			list-style:none;
    			font-size:12px;
    			font-family: $f-sans-serif-text;
    			color:#333;
    			margin:0 0 8px;
    			line-height:1em;

    			&:first-child{
    				padding-top:12px;
    				border-top: 1px dashed $nhsLightGrey;
    			}
    			&:last-child{
    				padding-bottom:12px;
    			}

    			&:after{
    				clear:both;
    				display:block;
    				content: '';
    			}

    			.breakdown-name{
    				float:left;
    				width:148px;
    			}

    			.breakdown-price{
    				font-weight:bold;
    				float:right;
    				width:50px;
    				text-align: right;
    			}
    		}
    	}
        &.sticky{
            opacity:1;
        }
    }
    @media(min-width:breakpoints(mobileLandscape)){
        .header-wrapper{
            padding:0 20px;
        }

        #interactive-content{
	    	padding:0 20px;
	    }

	    #questions-container{
	    	.question-container{
	    		h3{
	    			font-size:20px;
	    		}
	    		h4{
	    			font-size:14px;
	    		}
                &.order-0{
                    margin-right:20px;
                }
                &.order-1{
                    margin-left:20px;
                }
	    	}
	    	.treatment-list{
	    		li{
	    			font-size:16px;
                    padding:14px 0;
	    			.treatment-radio-button{
	    				width:14px;
	    				height:14px;
                        margin-top:-7px;
	    				&:before{
	    					width:8px;
	    					height:8px;
	    				}
	    			}
                    .treatment-price{
                        top:14px;
                    }
	    		}
	    	}
	    }
        #receipt-holder{
            right:20px;
        }   
    }

    @media ( min-width: breakpoints(phablet) ) {
        header#title-header{
            h1{
                font-size:20px;
            }
        	h2{
        		font-size:60px;
        	}
        }
        header#details-header{
            padding-top:18px;
            p{
                font-size:36px;
                line-height:42px;
            }
            #gender-select{
                button{
                    height:36px;
                    font-size:16px;
                    margin-top:2px;
                }
            }
            select{
                height:36px;
                margin-bottom:4px;
                font-size:16px;
            }
            #total-number{
                font-size:54px;
            }
        }
        #questions-container{
            #title-question{
                padding-top:18px;
                max-width: 620px;
                h5,h2{
                    font-size:24px;
                }
            }
        }
        .shareButtons{
            button{
                width:36px;
                height:36px;
            }
        }
	    .treatment-list{
    		li{
    			font-size:16px;
    			padding: 14px 0;
    		}
    	}
    }

    @media ( min-width: breakpoints(tablet) ) { //740px
		#questions-container{
	    	.question-container {
                max-width:620px;
                .question-intro{
    	    		padding-left:20px;
    	    		padding-right:20px;
    	    	}
                .hidden-container{
                    padding-left:20px;
                    padding-right:20px;
                }
            }
            .treatment-list{
                column-count:2;
                column-gap: 40px;
                li{
                    -webkit-column-break-inside: avoid;
                }
            }
	    }
    }

    @media ( min-width: breakpoints(desktop) ) {
        .header-wrapper{
            max-width:980px;
        }
    	header#title-header{
    		h1,h2,#intro-text,.shareButtons{
    			margin-left:80px;
                max-width:620px;
    		}
            h1{
                font-size:24px;
            }
            
            #intro-text{
                margin-top:24px;
                font-size:18px;
            }
    	}

        header#details-header{
            p{
                margin-left:80px;
            }
            #total-number{
                margin-left:80px;
            }
        }

    	#questions-container{
	    	max-width:780px;
	    	#title-question{
	    		margin-bottom:48px;
                margin-left:80px;
	    		h2{
                    font-size:24px;
	    		}
                h5{
                    font-size:24px;
                }
	    		p{
	    			font-size:16px;
	    		}
	    	}
            .question-container{
                &.order-0{
                    margin-left:80px;
                }
                &.order-1{
                    margin-left:60px;
                }
            }
	    }
        #receipt-holder{
            top:240px;
            width:220px;
        }
        #receipt-container{
            width:220px;
            bottom:auto;
            position:absolute;
            border-color:$nhsLightGrey;
            right:auto;
            box-shadow:none;
            opacity: 1;
            #total-number{
                padding: 20px 0;
            }
            #total-breakdown{
                display:block;  
            }
            &.sticky{
                position:fixed;
                top:10px;
            }
            
        }

    }

    @media ( min-width: breakpoints(leftCol) ) { //1140px
        .header-wrapper{
            max-width:1140px;
        }
    	header#title-header{
            padding-top:18px;
    		h2{
                margin-left:160px;
                max-width:700px;
    		}
            h1{
                position:absolute;
                left:20px;
                margin:4px 0 0;
                width:140px;
                font-size:20px;
            }
            .shareButtons{
                margin-left:160px;
            }

            #intro-text{
                margin-left:160px;
                max-width: 700px;
            }
    	}
        header#details-header{
            p{
                margin-left:160px;
                max-width: 700px;
            }
            #total-number{
                margin-left:160px;
            }
        }
    	#questions-container{
            max-width:none;
            #title-question{
                margin-left:160px;
                max-width:700px;
                h2{
                    font-size:24px;
                }
            }

	    	.question-container{
                max-width: 700px;
	    		h3{
	    			font-size:24px;
	    		}
	    		.question-intro{
	    			padding:36px 20px 36px 20px;
	    		}
	    		.question-radio-button{
	    			width:31px;
	    			height:31px;
	    			margin-top:-16px;
	    			&:before{
	    				margin-left:3px;
	    				margin-top:3px;
	    				width:23px;
	    				height:23px;
	    			}
	    		}
	    		.hidden-container{
	    			padding-left:20px;
	    			padding-right:20px;
	    		}
                &.order-0{
                    margin-left:160px;
                }
                &.order-1{
                    margin-left:140px;
                }
	    	}
	    	.treatment-list{
	    		li{
	    			padding:16px 0;
	    			font-size:18px;
	    			.treatment-price{
	    				top:18px;
	    			}
	    			.treatment-name{
	    				padding-top:2px;
	    				padding-left:30px;
	    			}
	    			.treatment-radio-button{
	    				width:18px;
	    				height:18px;
	    				border-radius:20px;
                        margin-top:-9px;
	    				&:before{
	    					width:12px;
	    					height:12px;
	    					margin-left:2px;
	    					margin-top:2px;
	    				}
	    			}
	    		}
	    	}
	    }
        #receipt-holder{
            top:210px;
        }
    }

    @media ( min-width: breakpoints(wide) ) {
        .header-wrapper{
            max-width:1300px;
        }
    	header#title-header{
    		h2,#intro-text{
    			margin-left:240px;
    		}
            .shareButtons{
                margin-left:240px;
            }
    	}

        header#details-header{
            p{
                margin-left:240px;
            }
            #total-number{
                margin-left:240px;
            }
        }

    	#questions-container{
            #title-question{
                margin-left:240px;
            }
            .question-container{
                &.order-0{
                    margin-left:240px;
                }
                &.order-1{
                    margin-left:220px;
                }
            }
	    }
	    #receipt-holder{
            width:300px;
        }
        #receipt-container{
            width:300px;
            opacity:1;
        }
        #receipt-container{ 
            .breakdown-list li .breakdown-name{
                width:228px;
            }
            #total-number{
                p{
                    font-size:14px;
                    width:120px;
                }
                h5{
                    font-size:28px;
                    width:140px;
                }
            }
        }
    }
}


@keyframes appear{
	0%{
		opacity:0;
		position:absolute;
	}
	60%{
		opacity:0;
		position:absolute;
	}
	65%{
		opacity:0;
		position:relative;
	}
	85%{
		opacity:1;
	}
}

@keyframes disappear{
	0%{
		opacity:1;
		position:relative;
	}
	20%{
		opacity:0;
		position:absolute;
	}
}
